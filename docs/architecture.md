# Архитектура проекта

## Верхнеуровневая архитектура
- Приложение для практик (медитативных, дыхательных, телесных) на Next.js
- Квиз для подбора практик на основе выбранных пользователем опций
- Единый плеер с поддержкой режимов медитации и видео
- Интеграция с Supabase для хранения логики квиза и данных пользователя
- Клиентская часть на React 19, TypeScript и Tailwind CSS

## Среднеуровневые компоненты
- **Страницы**: 
  - Главная страница (/) с QuizApp компонентом
- **Компоненты квиза**: 
  - QuizScreen - контейнер для экранов квиза
  - ChoosePracticeScreen - выбор типа практики
  - PracticeTimeScreen - выбор длительности практики
  - PracticeGoalScreen - выбор цели практики
  - PracticeApproachScreen - выбор подхода к практике
- **Компоненты плеера**:
  - Player - универсальный плеер для всех типов практик
  - MeditationMode - режим медитаций с таймером
  - VideoMode - режим видео с контентом
- **Контексты**: 
  - QuizContext - контекст для хранения состояния квиза
  - PlayerContext - контекст для управления плеером

## Структура базы данных (Supabase)
- **Таблица quizlogic**:
  - `id` - уникальный идентификатор
  - `type` - тип практики (meditation, breathing, physical)
  - `duration` - длительность практики
  - `goal` - цель практики
  - `approach` - подход к практике (guided, self-practice)
  - `content_type` - тип контента (video, audio, timer)
  - `content_url` - URL к контенту
  - `title` - название практики
  - `description` - описание практики
  - `created_at` - дата создания
  - `updated_at` - дата обновления

## Зависимости и используемые технологии
- **Frontend**: Next.js 15.1.0, React 19, TypeScript 5
- **Стилизация**: TailwindCSS
- **БД**: Supabase для хранения логики квиза
- **UI-компоненты**: Framer Motion для анимаций
- **Мультимедиа**: HTML5 Video/Audio для плеера

## Структура файлов
```
w_ivan
├── docs                        # Документация проекта
│   ├── architecture.md         # Описание архитектуры
│   ├── SHORT_PLANNING.md       # Краткосрочное планирование
│   └── TASK.md                 # Задачи проекта
├── public                      # Статические файлы
│   └── surf                    # Изображения для приложения
├── src                         # Исходный код
│   ├── app                     # App Router структура Next.js
│   │   └── page.tsx            # Главная страница с квизом
│   ├── components              # React компоненты
│   │   ├── Player              # Компоненты плеера
│   │   │   ├── Player.tsx      # Основной компонент плеера
│   │   │   ├── MeditationMode.tsx # Режим медитации
│   │   │   └── VideoMode.tsx   # Режим видео
│   │   └── Quiz                # Компоненты квиза
│   │       ├── QuizScreen.tsx  # Основной контейнер квиза
│   │       ├── ChoosePracticeScreen.tsx # Экран выбора практики
│   │       ├── PracticeTimeScreen.tsx # Экран выбора времени
│   │       ├── PracticeGoalScreen.tsx # Экран выбора цели
│   │       └── PracticeApproachScreen.tsx # Экран выбора подхода
│   ├── context                 # React контексты
│   │   ├── QuizContext.tsx     # Контекст для состояния квиза
│   │   └── PlayerContext.tsx   # Контекст для управления плеером
│   └── lib                     # Вспомогательные функции и утилиты
│       └── supabase.ts         # Клиент и утилиты для Supabase
├── next.config.ts              # Конфигурация Next.js
├── package.json                # Зависимости и скрипты проекта
├── postcss.config.mjs          # Конфигурация PostCSS
├── tailwind.config.ts          # Конфигурация Tailwind CSS
└── tsconfig.json               # Конфигурация TypeScript
```

## Важные моменты и хаки
- Плеер имеет два режима работы: медитация и видео, с общим интерфейсом
- Квиз использует подход пошагового выбора с зависимыми опциями
- Логика рекомендаций практик реализована через фильтрацию данных из Supabase
- Анимированные переходы между экранами для улучшения UX

## Последняя верификация: 09.05.2024
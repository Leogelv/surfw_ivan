# Задачи на разработку квиза и плеера

## 1. Настройка Supabase и создание БД
- **1.1.** Создать проект в Supabase
  - Настроить аутентификацию (при необходимости)
  - Получить API ключи
- **1.2.** Создать таблицу quizlogic
  - Выполнить SQL скрипт из docs/supabase_schema.md
  - Заполнить таблицу тестовыми данными
- **1.3.** Настроить Row Level Security (RLS)
  - Создать политики доступа для чтения/записи

## 2. Настройка проекта и интеграция с Supabase
- **2.1.** Установить необходимые зависимости
  - Добавить клиент Supabase (`@supabase/supabase-js`)
  - Установить библиотеки для аудио/видео плеера
- **2.2.** Настроить клиент Supabase
  - Создать файл `src/lib/supabase.ts`
  - Настроить подключение к Supabase
- **2.3.** Создать типы данных для квиза
  - Определить интерфейсы для таблицы quizlogic
  - Определить типы для состояния квиза и плеера

## 3. Разработка контекстов для хранения состояния
- **3.1.** Создать QuizContext
  - Реализовать хранение выбранных опций
  - Добавить функции для обновления состояния
  - Реализовать сохранение в localStorage
- **3.2.** Создать PlayerContext
  - Добавить состояние для плеера
  - Реализовать управление воспроизведением
  - Добавить настройки для разных режимов

## 4. Разработка компонентов квиза
- **4.1.** Создать базовый контейнер QuizScreen
  - Реализовать навигацию между экранами
  - Добавить анимации переходов
- **4.2.** Разработать ChoosePracticeScreen
  - Создать карточки для типов практик
  - Реализовать выбор и сохранение в контексте
- **4.3.** Разработать PracticeTimeScreen
  - Реализовать слайдер или кнопки выбора времени
  - Добавить сохранение выбранного времени в контексте
- **4.4.** Разработать PracticeGoalScreen
  - Реализовать динамическую загрузку целей на основе типа практики
  - Добавить карточки с описанием целей
- **4.5.** Разработать PracticeApproachScreen
  - Создать интерфейс выбора подхода к практике
  - Реализовать финальный шаг квиза
- **4.6.** Разработать ResultScreen
  - Создать интерфейс с подобранной практикой
  - Добавить кнопку для начала практики
  - Реализовать возможность перезапуска квиза

## 5. Разработка компонентов плеера
- **5.1.** Создать базовый компонент Player
  - Реализовать общий интерфейс плеера
  - Добавить контроллеры (пауза, громкость)
- **5.2.** Разработать MeditationMode
  - Создать таймер с визуализацией
  - Добавить управление фоновым звуком
  - Реализовать уведомление об окончании практики
- **5.3.** Разработать VideoMode
  - Интегрировать видеоплеер
  - Добавить контроллеры видео
  - Реализовать отображение текстовой информации

## 6. Интеграция с Supabase и загрузка данных
- **6.1.** Создать сервисные функции для работы с Supabase
  - Реализовать функции для запроса всех опций квиза
  - Добавить функцию для получения практики по параметрам
- **6.2.** Интегрировать запросы в компоненты квиза
  - Загружать доступные опции для каждого шага
  - Фильтровать опции на основе предыдущих выборов
- **6.3.** Реализовать загрузку контента для плеера
  - Получать URL контента из Supabase
  - Загружать соответствующий аудио/видео контент

## 7. Тестирование и отладка
- **7.1.** Протестировать все экраны квиза
  - Проверить переходы между экранами
  - Убедиться в корректном сохранении выбранных опций
- **7.2.** Протестировать фильтрацию данных
  - Проверить корректность фильтрации на каждом шаге
  - Тестировать выбор практики на основе параметров
- **7.3.** Протестировать режимы плеера
  - Проверить работу медитационного режима
  - Протестировать видеорежим
  - Убедиться в корректной работе контроллеров

## 8. Оптимизация и доработка
- **8.1.** Оптимизировать производительность
  - Добавить мемоизацию для компонентов
  - Оптимизировать запросы к Supabase
- **8.2.** Добавить обработку ошибок
  - Реализовать обработку ошибок загрузки данных
  - Добавить фолбэки для отсутствующего контента
- **8.3.** Реализовать адаптивный дизайн
  - Добавить адаптацию для мобильных устройств
  - Оптимизировать интерфейс плеера

## 9. Документация и развертывание
- **9.1.** Обновить документацию проекта
  - Дополнить architecture.md
  - Актуализировать TASK.md
- **9.2.** Подготовить к деплою
  - Настроить переменные окружения
  - Тестовое развертывание на Vercel 